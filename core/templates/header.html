{% load static %}

{% if messages %}
  <ul class="messages" id="messages-list">
      {% for message in messages %}
          <li class="message {% if message.tags %}{{ message.tags }}{% endif %}">{{ message }}</li>
      {% endfor %}
  </ul>
{% endif %}

<header class="no-print">
  
  <button class="thema" onclick="toggleDarkMode()"><img class="dayNight" src="{% static 'img/day-and-night.png' %}" alt="day-and-night"></button>

  <div class="dropdown">
    {% if profile.profile_pic %}
      <img class="profile-photo-header" src="{{ profile.profile_pic.url }}" alt="avatar">
    {% else %}
      <img class="profile-photo-header" src="{% static 'img/no-photo.jpg' %}" alt="avatar">
    {% endif %}
    {% if user.is_authenticated %}
      <h4>Olá, {{ request.user.username }}</h4>
    {% else %}
      <h4>Entrar|Cadastro</h4>
    {% endif %}
    <div class="dropdown-arrow" onclick="toggleDropdown()"></div>

    <div class="dropdown-content" id="dropdownContent">
      {% if user.is_authenticated %}
        <a href="{% url 'profile_user' %}">Painel do Usuário</a>
      {% if user.is_superuser %}
          <a href="/admin/" target="_blank">Painel Administrativo</a><br>
      {% endif %}
        <a href="{% url 'logout_user' %}">Sair</a>
      {% else %}
        <a href="{% url 'login' %}">Login</a>
        <a href="{% url 'register_user' %}">Cadastro</a>
      {% endif %}
    </div>
  </div>

</header>
<script>
  // Função para alternar entre os temas
  function toggleDarkMode() {
      const currentTheme = document.documentElement.classList.contains('dark-mode') ? 'light-mode' : 'dark-mode';
      document.documentElement.classList.toggle('dark-mode');
      document.documentElement.classList.toggle('light-mode');
      localStorage.setItem('theme', currentTheme); // Salva o tema selecionado
  }

  // Verifica se o tema foi previamente selecionado pelo usuário
  document.addEventListener('DOMContentLoaded', function() {
      const theme = localStorage.getItem('theme');
      if (theme) {
          document.documentElement.classList.add(theme);
      } else {
          // Define um tema padrão se nenhum foi selecionado anteriormente
          document.documentElement.classList.add('light-mode'); // Ou 'dark-mode', dependendo do seu padrão
      }
  });
</script>