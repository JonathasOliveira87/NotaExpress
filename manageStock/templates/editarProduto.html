{% extends 'base.html' %}

{% load static %}

{% block title %}Editar Produtoo{% endblock %}

{% block content %}

<head>
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>

<main>
    <article>
        <h1>
            <a href="{% url 'menu' %}"><button class="menu">Início</button></a>|
            <a href="{% url 'cadProduto' %}"><button class="menu">Cadastrar Produto</button></a>|
            <a href="{% url 'verEstoque' %}"><button class="menu">Ver Estoque</button></a>
        </h1>

        <form method="post" action="{% url 'editarProduto' produto.id %}" enctype="multipart/form-data">
            {% csrf_token %}
            <h2>Editar Produto</h2> 
            <div class="content">
                <div class="sidebyside">
                    <div class="form">
                        <label for="nome">Nome do produto:</label>
                        <input type="text" id="nome" name="nome" required value="{{ produto.nome }}">

                        <label for="preco">Preço de custo R$:</label>
                        <input type="text" id="preco" name="preco" required onblur="formatarMoeda(this)" placeholder="Digite o valor e use virgula(,) para centavos"  value="{{ produto.preco }}">

                        <label for="quantidade">Quantidade:</label>
                        <input type="number" id="quantidade" name="quantidade" required value="{{ produto.quantidade }}">

                        <label for="categoria">Local:</label>
                        <select id="local" name="local" required>
                            <option value="" disabled selected>Selecione um local</option>
                            {% for loc in local %}
                                <option value="{{ loc.id }}">{{ loc.local }}</option>
                            {% endfor %}
                        </select>

                    </div>
                    <div class="form">
                        <label for="nomeForn">Nome do fernecedor:</label>
                        <input type="text" id="nomeForn" name="nomeForn" required value="{{ produto.nome_fornecedor }}">
                        <label for="codigo">Código do produto:</label>
                        <input type="text" id="codigo" name="codigo" required value="{{ produto.codigo }}">
                        <label for="categoria">Categoria do produto:</label>
                        <select id="categoria" name="categoria" required>
                            <option value="" disabled selected>Selecione uma categoria</option>
                            {% for cat in categorias %}
                                <option value="{{ cat.id }}">{{ cat.categoria }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="form">
                        <div class="box-photo">
                            <a id="profile-photo-link">
                                {% if produto.foto_produto %}
                                    <img id="produto-photo-preview" class="produto-photo" src="{{ produto.foto_produto.url }}">
                                {% else %}
                                    <img id="produto-photo-preview" class="produto-photo" src="{% static 'img/produto_sem_foto.png' %}">
                                {% endif %}

                            </a>
                            <input type="file" name="update_photo" id="update_photo" onchange="previewImage()">
                        </div>
                    </div>
                </div>  
                <input type="submit" value="Atualizar Produto">
        </form>  
    
        </div>
    </article>
</main>

{% endblock %}